<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Basic Metas -->
	<meta charset="utf-8">
	<title>"Вопросы на интервью. Как перевернуть массив? " | qa7.ru</title>
	<meta name="description" content="Один из популярнейших вопросов на интервью для java-девелопера это просьба перевернуть массив. Это очень похоже на вопрос из прошлой статьи, про переворачивание строки, но немного про другое. Вопрос не выглядит сложным, все что нужно сделать это создать новый массив такого же размера, перебрать исходный массив от конца до нажала заполняя ...">
	<meta name="author" content="Erik Khalimov">
	<link rel="author" href="https://plus.google.com/+ErikKhalimov"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<!-- Twitter Cards and Open Graph -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:creator" content="@biomehanik">
	<meta name="twitter:domain" content="">
	<meta name="twitter:site" content="@biomehanik">
	<meta property="og:title" content=""Вопросы на интервью. Как перевернуть массив? "">
	<meta property="og:description" content="Один из популярнейших вопросов на интервью для java-девелопера это просьба перевернуть массив. Это очень похоже на вопрос из прошлой статьи, про переворачивание строки, но немного про другое. Вопрос не выглядит сложным, все что нужно сделать это создать новый массив такого же размера, перебрать исходный массив от конца до нажала заполняя ...">
	<meta property="og:image" content="http://qa7.ru/theme/images/avatar512.png">
	<meta property="og:type" content="article">
	<meta property="og:url" content="http://qa7.ru/blog/2015/03/29/voprosy-na-interviu-kak-perevernut-massiv/">

	<!-- Stylesheets and Web Fonts -->
	<link href="/theme/style.min.css" rel="stylesheet">
	<link href="//fonts.googleapis.com/css?family=Raleway:400,600|Source+Code+Pro" rel="stylesheet" type="text/css">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Favicons -->
	<link rel="apple-touch-icon" href="/theme/images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="57x57" href="/theme/images/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/theme/images/apple-touch-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/theme/images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/theme/images/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/theme/images/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/theme/images/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/theme/images/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/theme/images/apple-touch-icon-152x152.png">

	<link rel="icon" type="image/png" href="/theme/images/favicon-16x16.png" sizes="16x16">
	<link rel="icon" type="image/png" href="/theme/images/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="/theme/images/favicon-96x96.png" sizes="96x96">
	<link rel="icon" type="image/png" href="/theme/images/favicon-160x160.png" sizes="160x160">
	<link rel="icon" type="image/png" href="/theme/images/favicon-196x196.png" sizes="196x196">

	<meta name="application-name" content="qa7.ru">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="msapplication-TileImage" content="theme/images/mstile-144x144.png">
	<meta name="msapplication-square70x70logo" content="theme/images/mstile-small.png">
	<meta name="msapplication-square150x150logo" content="theme/images/mstile-medium.png">
	<meta name="msapplication-wide310x150logo" content="theme/images/mstile-wide.png">
	<meta name="msapplication-square310x310logo" content="theme/images/mstile-large.png">

	<!--[if lt IE 9]>
	<script src="/theme/js/html5shiv.min.js"></script>
	<script src="/theme/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
	<div class="container">
		<aside id="sidebar" class="side-column">
			<a href="/"><img id="avatar" alt="Site Avatar" src="/theme/images/avatar.png"></a>
			<div id="logo" class="text-center"><a href="/">qa7.ru</a></div>
			<div id="bio" class="text-center">Blog about programming, testing and life</div>

			<div id="sidebar-links" class="text-center">
				<a href="/about/">About</a>&ensp;&bull;&ensp;<a href="/projects/">Projects</a>
			</div>

			<div id="social" class="text-center">
				<a href="mailto:biomaks@gmail.com" title="Email" class="icon fa fa-envelope"></a>
				<a href="http://twitter.com/biomehanik" title="Twitter" class="icon fa fa-twitter"></a>
				<a href="http://plus.google.com/+ErikKhalimov" title="Google+" class="icon fa fa-google-plus-square"></a>
				<a href="http://github.com/biomaks" title="GitHub" class="icon fa fa-github"></a>
				<a href="atom.xml" title="RSS" class="icon fa fa-rss"></a>
			</div>

			<hr id="sidebar-divider">
			<a id="st" href="http://software-testing.ru/about/blogs" target="_blank"><img src="http://software-testing.ru/images/stru_blog_banner.gif" border="0" width="88" height="60" alt="Software-Testing.Ru" /></a>
		</aside>

		<article class="main-column">
	<h1 class="title"><a href="/blog/2015/03/29/voprosy-na-interviu-kak-perevernut-massiv/" title="Permalink to "Вопросы на интервью. Как перевернуть массив? "">"Вопросы на интервью. Как перевернуть массив? "</a></h1>
	<time class="date" datetime="2015-03-29 09:38:04+04:00">March 29, 2015</time>
	<div class="content">
		<p>Один из популярнейших вопросов на интервью для java-девелопера  это просьба перевернуть массив. Это очень похоже на вопрос из прошлой статьи, про переворачивание <a href="/blog/2014/07/07/voprosy-po-java-na-interviu-2/">строки</a>, но немного про другое.  Вопрос не выглядит сложным, все что нужно сделать это создать новый массив такого же размера, перебрать исходный массив от конца до нажала заполняя новый. Все, готово. Но нет, мы же создали дополнительный массив того же размера, что и исходный, что усложняет наше решение <code>O(n).</code> Мы не сможем использовать наше решение, если размер массива очень большой (например 10 млн элементов), а размер heap небольшой. Что мы можем тут сделать? Как улучшить наше решение? Можем ли мы перевернуть массив не создавая дополнительный буффер? Для нашей задачи предположим, что у нас массив из <code>integer</code> (вообще на интервью хорошая практика задавать правильные вопросы в правильных местах, как говорят знающие люди это черта хорошего программиста). Ключевое тут понять, что вам нужно перевернуть исходный массив, мы не можем использовать другой массив, но использовать одну две дополнительные переменные, вполне допустимо. Так же недопустимо использование сторонних библиотек или <code>Java API</code> которые могут сделать эту работу за нас, а также методов класса <code>java.util.Arrays</code>, за исключением <code>Arrays.toString()</code> чтобы выводить массивы. Когда наши требования выяснены приступим к решению задачи. </p>
<p>Первое что приходит в голову это перебрать все элементы массива и поменять их местами. Первый элемент и последний, второй элемент с предпоследним, и т.д. В этом случае все элементы массивы будут перевернуты без использования дополнительного буффера. Ключевая вещь здесь, которую нужно держать в голове это только что нам нужно менять местами элементы до того момента как мы достигнем середины массива, иначе мы получим тот же самый массив. Возникает закономерный вопрос, а что если массив имеет четное количество элементов? В этом случае в середине массива будут два элемента, и нам нужно поменять их местами, поэтому наше условие перебора будет содержать выражение <code>index &lt;= middle</code> а не <code>index &lt; middle</code>. Середина тут ничто иное как <code>length/2</code>. Помните что мы будем использовать     оператор <code>/</code> что означает в случае если <code>length</code> равно 8, вернет нам 4, а в случае если <code>length</code> равно 7, вернет нам 3. Так что в случае четного количества элементов средние элементы поменяются местами, а в случае нечетного средний элемент останется на месте. </p>
<p>Как говорится, лучше один раз увидеть, чем 100 раз прочитать.
<img alt="Array" src="http://qa7.ru/images/gallery/other/Reverse_Array_in_Place_in_Java.png" style="width: 734px; height: auto; max-width: 100%;"/></p>
<p>Ниже пример моей программы, которая переворачивает массив в один проход, так же неплохо будет посмотреть на юнит тесты к этому коду далее для лучшего понимания.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="codehilite"><pre><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Java Program to demonstrate how to reverse an array in place.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArrayReversalDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">};</span>
        <span class="n">reverse</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * reverse the given array in place * @param input</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">reverse</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">input</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"original array : "</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">input</span><span class="o">));</span>
        <span class="c1">// handling null, empty and one element array</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">input</span><span class="o">.</span><span class="na">length</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">input</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="c1">// swap numbers</span>
            <span class="n">input</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">input</span><span class="o">[</span><span class="n">input</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="o">];</span>
            <span class="n">input</span><span class="o">[</span><span class="n">input</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"reversed array : "</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">input</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<p>Output:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre>original array:[1,2,3,4,5,6,7]
reversed array:[7,6,5,4,3,2,1]
original array:[]
original array:null
original array:[1,2,3,4,5,6]
reversed array:[6,5,4,3,2,1]
original array:[1]
reversed array:[1]
</pre></div>
</td></tr></table>
<p>Ниже мой набор JUnit тестов для нашего <code>reverse(int[] input)</code> метода. Наши тесты должны покрывать случаи, когда массив пустой, когда вместо массива <code>null</code>, массив содержит один элемент, массив имеет четное и нечетное количество элементов.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="codehilite"><pre><span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertArrayEquals</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ArrayReversalDemoTest</span> <span class="o">{</span>
    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testReverseWithEvenLengthOfArray</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">};</span>
        <span class="n">ArrayReversalDemo</span><span class="o">.</span><span class="na">reverse</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
        <span class="n">assertArrayEquals</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">6</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">},</span> <span class="n">numbers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testReverseWithOddLengthOfArray</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">};</span>
        <span class="n">ArrayReversalDemo</span><span class="o">.</span><span class="na">reverse</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
        <span class="n">assertArrayEquals</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">7</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">},</span> <span class="n">numbers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testReverseWithEmptyArray</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{};</span>
        <span class="n">ArrayReversalDemo</span><span class="o">.</span><span class="na">reverse</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
        <span class="n">assertArrayEquals</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{},</span> <span class="n">numbers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testReverseWithNullArray</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">ArrayReversalDemo</span><span class="o">.</span><span class="na">reverse</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
        <span class="n">assertArrayEquals</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">numbers</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testReverseWithJustOneElementArray</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">};</span>
        <span class="n">ArrayReversalDemo</span><span class="o">.</span><span class="na">reverse</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
        <span class="n">assertArrayEquals</span><span class="o">(</span><span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">1</span><span class="o">},</span> <span class="n">numbers</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>
<p>Пока все. Продолжение следует...</p>
	</div>

	<div id="related-articles">
		<a href="/blog/2015/04/28/headless-webdriver-testy-na-python/" id="next-neighbour">&laquo; "Headless webdriver тесты на python"</a>
		<a href="/blog/2015/02/23/docker-prodolzhenie/" id="prev-neighbour">"Docker продолжение" &raquo;</a>
	</div>

	<hr>

	<!-- Disqus -->
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = 'biomaks-github-io';
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
			<hr>
		</article>

		<footer class="main-column">
			<p>Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://pages.github.com">GitHub&nbsp;Pages</a>.</p>
		</footer>
	</div>

	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-46878829-1', '');
		ga('send', 'pageview');
	</script>

	<!-- Yandex.Metrika counter -->
	<script type="text/javascript">
	(function (d, w, c) {
	    (w[c] = w[c] || []).push(function() {
	        try {
	            w.yaCounter23571979 = new Ya.Metrika({id:23571979,
	                    webvisor:true,
	                    clickmap:true,
	                    trackLinks:true,
	                    accurateTrackBounce:true});
	        } catch(e) { }
	    });

	    var n = d.getElementsByTagName("script")[0],
	        s = d.createElement("script"),
	        f = function () { n.parentNode.insertBefore(s, n); };
	    s.type = "text/javascript";
	    s.async = true;
	    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

	    if (w.opera == "[object Opera]") {
	        d.addEventListener("DOMContentLoaded", f, false);
	    } else { f(); }
	})(document, window, "yandex_metrika_callbacks");
	</script>
	<noscript><div><img src="//mc.yandex.ru/watch/23571979" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
	<!-- /Yandex.Metrika counter -->
</body>
</html>